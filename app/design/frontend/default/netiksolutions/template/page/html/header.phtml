<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container">
    <div class="header">
        <?php if ($this->getIsHomePage()):?>
        <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
        <?php else:?>
        <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
        <?php endif?>
        <div class="quick-access">
        <div id="search-input-form">
            <?php 
            if ($this->helper('customer')->isLoggedIn() ) {
            	echo $this->getChildHtml('topSearch');
            } else { 	
            	
            }
            ?>
           </div>
            <?php echo $this->getChildHtml('topLinks') ?>
            <div id="hi-msg">
	            <?php 
				//Chen Liang test for facebook image: 
				$block = $this->getLayout()->getBlockSingleton('Magestore_Sociallogin_Block_Fblogin');     
				 //$block->_prepareData();
				 if($block->getFbUserId()){
				     $fbUserId = $block->getFbUserId(); 
					     if (($this->helper('customer')->isLoggedIn()) && !!($fbUserId) ) {
					     	 $showHide = "style='display:block'";
					     } else {
					     	 $showHide = "style='display:none'";
					     }
				     }
				?>
				<input id="hide-input" value="<?php echo $fbUserId; ?>" style="display: none; " />
				<img id="fb-profile-image" src="https://graph.facebook.com/<?php echo $fbUserId; ?>/picture" <?php echo $showHide;?> />
	           	<div class="hi-message">
	           	<p class="welcome-msg" id="hi-message"><?php echo $this->getWelcome() ?> <?php echo $this->getAdditionalHtml() ?></p>
		           	<div class="cl_tooltip popover fade bottom in" style="display:none;">
		           		<div class="arrow"></div>
		           		<div class="popover-content">
			           	  <div id="cl_profile">
						     <a href="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);?>customer/account/">PROFILES</a>
						  </div>
						  <div id="cl_logout">
						 	 <a href="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_WEB);?>customer/account/logout">LOGOUT</a>
						  </div>
						  </div>
					</div>
				</div>
	           	<?php if ($this->helper('customer')->isLoggedIn() ):?>
			     <?php else:?>
			     <div style="margin-top: -5px; width: 122px; " >
					 <button title="INVITE FRIENDS" class="button red-btn" value="INVITE FRIENDS">
					 	<span><span><?php echo $this->__('INVITE FRIENDS') ?></span></span>
					 </button>
				 </div>
				 <?php endif;?>
            </div>

            
            <?php echo $this->getChildHtml('store_language') ?>
        </div>
        <?php echo $this->getChildHtml('topContainer'); ?>
    </div>
</div>
<?php //echo $this->getChildHtml('topMenu') ?>

<script type="text/javascript" >
       //cross-browser;
//Chen Liang 
      window.onload= function(){
             var browserType   = navigator.userAgent;
             if(browserType.indexOf("Chrome" )+1){
                  jQuery( "body").attr("class" ,jQuery("body").attr( "class")+" chrome");
                   //alert("chrome!");
            } else if(browserType.indexOf("MSIE 9.0" )+1){
                  jQuery( "body").attr("class" ,jQuery("body").attr( "class")+" IE9" );
                   //alert("IE9!");
            } else if(browserType.indexOf("MSIE 8.0" )+1){
                  jQuery( "body").attr("class" ,jQuery("body").attr( "class")+" IE8" );
                   //alert("IE8!");
            } else if(browserType.indexOf("Firefox" )+1) {
                  jQuery( "body").attr("class" ,jQuery("body").attr( "class")+" Firefox");
                   //alert("firefox!");
            } else if(browserType.indexOf("Safari" )+1) {
                  jQuery( "body").attr("class" ,jQuery("body").attr( "class")+" Safari");
                   //alert("safari!")
            }
      }
      jQuery(document).ready(function(){
    	  if (jQuery("#hide-input").val().length != 0) {
    		    jQuery("p.welcome-msg").css("margin-top", "-20px"
    		    )
    		}
          });

	    	
</script>
<script type="text/javascript">
	jQuery(".hi-message").hover(function(){
		jQuery(".cl_tooltip").css("display", "block"); 

		},
		function () {
		jQuery(".cl_tooltip").css("display", "none"); 
			});
//jQuery("#hi-message").tooltip({ effect: 'slide'});

</script>